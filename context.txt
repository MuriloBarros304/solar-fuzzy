INÍCIO DO CONTEXTO DO PROJETO - SISTEMAS FUZZY VS ML

Este é um projeto de chatbot integrado a um dashboard de previsão de irradiação solar no Rio Grande do Norte. O foco central desta etapa é a implementação e comparação de sistemas de Lógica Fuzzy (Mamdani e Sugeno) contra um modelo de referência (Benchmark) de Machine Learning (XGBoost).

Sobre o Projeto
O objetivo é prever a Irradiação Global Horizontal (GHI) baseando-se em variáveis climáticas e temporais. Enquanto o modelo de ML busca minimizar o erro estatístico matematicamente, os modelos Fuzzy buscam replicar o raciocínio humano de um especialista em meteorologia.

Dados e Features
Os dados originais provêm da integração entre estações terrestres (INMET) e dados de satélite (NSRDB), totalizando mais de 260.000 registros.
Diferença crucial de abordagem:
- O modelo ML (XGBoost) utiliza 12 features, capturando correlações complexas e não lineares.
- Os modelos Fuzzy utilizam apenas 4 variáveis de entrada (as mais significativas para o modelo de ML), simulando a limitação cognitiva humana em processar muitas variáveis simultaneamente.

Variáveis do Sistema Fuzzy (Inputs):
Foram escolhidas as quatro features com maior importância no projeto de ML
1. hora_cos (Elevação Solar): Representa a posição do sol. Vai de -1 (Zênite/Meio-dia) a 1 (Noite).
2. hora_sin (Ciclo Diário): Diferencia Manhã (valores positivos) de Tarde (valores negativos).
3. tipo_nuvem: Grau de cobertura de nuvens (0 a 10).
4. temp_ar: Temperatura do ar (°C), usada para inferir eficiência térmica.

Variável de Saída (Output):
- GHI (Global Horizontal Irradiance): Medida em W/m², classificada de "Zero" a "Extremo".

Metodologia Fuzzy
Foram desenvolvidos dois controladores:
1. Mamdani (Foco na Suavidade):
   - Output: Conjuntos Fuzzy (Triângulos/Trapézios).
   - Processamento: Realiza inferência baseada em áreas e defuzzificação por Centroide (Centro de Gravidade).
   - Vantagem: Gera uma curva de resposta mais suave e natural, interpolando melhor entre as regras.

2. Sugeno (Foco na Eficiência/Rigidez):
   - Modelo Adotado: Sugeno de Ordem Zero (Zero-Order).
   - Output: Constantes numéricas (Singletons).
     Exemplo: IF regra X is True THEN y = Constante (ex: 800 W/m²).
   - Defuzzificação: Média Ponderada.
   - Característica: É computacionalmente mais rápido, mas suas transições são mais abruptas ("degraus"), o que explica a dificuldade em modelar a variabilidade contínua da radiação solar.

Detalhes do Motor de Inferência (Operadores e Agregação)
Para garantir a consistência teórica, ambos os sistemas utilizam as normas padrão de Zadeh:

1. Operadores Lógicos (Antecedentes):
   - Conjunção (AND): Operador Mínimo (T-Norma). Ex: Se A e B, pega o menor valor entre A e B.
   - Disjunção (OR): Operador Máximo (S-Norma). Ex: Se A ou B, pega o maior valor.

2. Método de Implicação (Ativação da Regra):
   - Método: Mínimo (Clipping/Truncamento).

3. Método de Agregação (Composição das Regras):
   - Método: Máximo (União).

Nota sobre o Sugeno: No Sugeno, a implicação é direta: o grau de ativação da regra (w) serve como peso para o cálculo da média ponderada da saída (z), não havendo truncamento geométrico.

Regras (Conhecimento Especialista)
O sistema possui 19 regras que cobrem o espaço de decisão. Exemplos da lógica aplicada:
- Regras de Bloqueio: Se é noite OU se o céu está encoberto com sol baixo -> GHI é Zero.
- Regras de Pico: Se Sol no Zênite + Céu Limpo + Temp Confortável -> GHI é Extremo.
- Regras de Atenuação: Nuvens parciais ou temperaturas muito altas (que reduzem a eficiência) rebaixam a classificação do GHI (de Extremo para Muito Alto ou Alto).
- Assimetria Manhã/Tarde: Devido à turbidez atmosférica, manhãs limpas tendem a ter mais irradiação que tardes limpas.

Regra 1: IF hora_cos[noite] THEN ghi[zero]
Regra 2: IF hora_cos[baixo] AND tipo_nuvem[encoberto] THEN ghi[zero]
Regra 3: IF (hora_cos[zenite] AND tipo_nuvem[limpo]) AND temp_ar[conforto] THEN ghi[extremo]
Regra 4: IF (hora_cos[zenite] AND tipo_nuvem[limpo]) AND temp_ar[quente] THEN ghi[muito_alto]
Regra 5: IF (hora_cos[zenite] AND tipo_nuvem[parcial]) AND temp_ar[conforto] THEN ghi[alto]
Regra 6: IF (hora_cos[zenite] AND tipo_nuvem[parcial]) AND temp_ar[quente] THEN ghi[medio]
Regra 7: IF (hora_cos[zenite] AND tipo_nuvem[encoberto]) AND temp_ar[conforto] THEN ghi[baixo]
Regra 8: IF (hora_cos[zenite] AND tipo_nuvem[encoberto]) AND temp_ar[quente] THEN ghi[muito_baixo]
Regra 9: IF ((hora_cos[alto] AND hora_sin[manha]) AND tipo_nuvem[limpo]) AND temp_ar[conforto] THEN ghi[muito_alto]
Regra 10: IF ((hora_cos[alto] AND hora_sin[manha]) AND tipo_nuvem[limpo]) AND temp_ar[quente] THEN ghi[alto]
Regra 11: IF ((hora_cos[alto] AND hora_sin[manha]) AND tipo_nuvem[parcial]) AND temp_ar[conforto] THEN ghi[medio]
Regra 12: IF ((hora_cos[alto] AND hora_sin[manha]) AND tipo_nuvem[parcial]) AND temp_ar[quente] THEN ghi[baixo]
Regra 13: IF ((hora_cos[alto] AND hora_sin[tarde]) AND tipo_nuvem[limpo]) AND temp_ar[conforto] THEN ghi[alto]
Regra 14: IF ((hora_cos[alto] AND hora_sin[tarde]) AND tipo_nuvem[limpo]) AND temp_ar[quente] THEN ghi[medio]
Regra 15: IF ((hora_cos[alto] AND hora_sin[tarde]) AND tipo_nuvem[parcial]) AND temp_ar[conforto] THEN ghi[baixo]
Regra 16: IF ((hora_cos[alto] AND hora_sin[tarde]) AND tipo_nuvem[parcial]) AND temp_ar[quente] THEN ghi[muito_baixo]
Regra 17: IF hora_cos[alto] AND tipo_nuvem[encoberto] THEN ghi[muito_baixo]
Regra 18: IF (hora_cos[baixo] AND hora_sin[manha]) AND (tipo_nuvem[limpo] OR tipo_nuvem[parcial]) THEN ghi[baixo]
Regra 19: IF (hora_cos[baixo] AND hora_sin[tarde]) AND (tipo_nuvem[limpo] OR tipo_nuvem[parcial]) THEN ghi[muito_baixo]

Resultados e Avaliação Comparativa

1. Machine Learning (XGBoost) - O Benchmark
    - R²: 0.9186 | RMSE: 86.24 W/m² | MAE: 51.66 W/m²
    - Análise: O ML tem desempenho superior pois treina com 12 variáveis e ajusta pesos matematicamente, capturando nuances que regras manuais não conseguem.

2. Fuzzy Mamdani
    - R²: 0.6229 | RMSE: 185.65 W/m² | MAE: 152.48 W/m²
    - Análise: Teve o melhor desempenho entre os sistemas Fuzzy. A defuzzificação por centroide permitiu uma "interpolação" suave entre as regras, lidando melhor com a variabilidade natural da irradiação solar e ruídos nos dados.

3. Fuzzy Sugeno
    - R²: 0.5347 | RMSE: 206.22 W/m² | MAE: 169.07 W/m²
    - Análise: Teve desempenho inferior ao Mamdani. A rigidez dos outputs (constantes/singletons) penalizou o modelo em momentos de transição de nuvens, onde o "meio termo" calculado pelo Mamdani se provou mais assertivo que os valores fixos do Sugeno.


Conclusão Geral
O Machine Learning é ideal para precisão numérica bruta. A Lógica Fuzzy provou-se útil para explicar o fenômeno ("White Box") e gerar estimativas razoáveis usando apenas 4 variáveis, mas sofreu com a complexidade estocástica da formação de nuvens, que é difícil de mapear totalmente em apenas 19 regras.

Instruções para a IA (Visualização de Gráficos)
Se o usuário perguntar sobre os assuntos abaixo, mencione EXATAMENTE as palavras-chave entre aspas para exibir as imagens correspondentes salvas na pasta 'predict/':

- "comparação": Para mostrar o gráfico de Série Temporal (GHI Real vs Estimados). Útil para ver como as curvas se comportam ao longo do dia.
- "dispersão": Para mostrar o Scatter Plot (Real vs Predito). Útil para ver onde os modelos erram mais (os "fantasmas" no gráfico).
- "barras": Para mostrar o gráfico de barras comparando RMSE, MAE e R² dos três modelos.
- "entradas": Para mostrar as funções de pertinência das variáveis de entrada (Inputs Fuzzy).
- "saída": Para mostrar as funções de pertinência da saída do Mamdani.
- "mapeamento": Para mostrar 4 superfícies de controle 3D comparando Mamdani e Sugeno.

Se o usuário perguntar "Por que o ML é melhor?", explique sobre a quantidade de features e o treinamento estatístico.
Se perguntar "Mamdani vs Sugeno", explique sobre a suavidade do centroide vs a rigidez do Sugeno.

FIM DO CONTEXTO